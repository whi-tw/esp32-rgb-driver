<html>
  <head>
    <title>ESP Web Server</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="data:," />
    <script src="https://cdn.jsdelivr.net/npm/@jaames/iro@5"></script>
  </head>
  <body>
    <h1>ESP Web Server</h1>
    <div id="picker"></div>
    <script>
      var lock = false;
      var prevColor = 0;
      var colorPicker = new iro.ColorPicker("#picker", {
        // color: "rgb({red},{green},{blue})",
        color: "rgb(0,0,0)",
      });
      colorPicker.on("input:start", function(color) {
        prevColor = color;
      });
      colorPicker.on("input:end", function(color) {
        if (lock) {
          colorPicker.color.set(prevColor.rgb);
          console.log("here");
          return;
        }
        console.log(color);
        lock = true;
        color = color.rgb;
        const Http = new XMLHttpRequest();
        const url = "/?r=" + color.r + "&g=" + color.g + "&b=" + color.b;
        console.log(url);
        Http.open("GET", url);
        Http.send();
        lock = false;
      });
    </script>
  </body>
</html>
